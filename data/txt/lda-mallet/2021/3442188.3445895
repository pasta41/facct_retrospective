Fairness Welfare and Equity in Personalized Pricing We study the interplay of fairness welfare and equity considerations in personalized pricing based on customer features Sellers are increasingly able to conduct price personalization based on predictive modeling of demand conditional on covariates setting customized interest rates targeted discounts of consumer goods and personalized subsidies of scarce resources with positive externalities like vaccines and bed nets These different application areas may lead to different concerns around fairness welfare and equity on different objectives price burdens on consumers price envy firm revenue access to a good equal access and distributional consequences when the good in question further impacts downstream outcomes of interest We conduct a comprehensive literature review in order to disentangle these different normative considerations and propose a taxonomy of different objectives with mathematical definitions We focus on observational metrics that do not assume access to an underlying valuation distribution which is either unobserved due to binary feedback or ill-defined due to overriding behavioral concerns regarding interpreting revealed preferences In the setting of personalized pricing for the provision of goods with positive benefits we discuss how price optimization may provide unambiguous benefit by achieving a triple bottom line personalized pricing enables expanding access which in turn may lead to gains in welfare due to heterogeneous utility and improve revenue or budget utilization We empirically demonstrate the potential benefits of personalized pricing in two settings pricing subsidies for an elective vaccine and the effects of personalized interest rates on downstream outcomes in microcredit INTRODUCTION Personalized pricing once restricted to the idealized construction of economic theory is now squarely within the realm of possibility for firms newly equipped with a deluge of fine-grained information about individuals and prediction modeling of demand or willingness to pay based on this information Given both the ubiquity of prices and their relevance in important domains such as hiring lending and credit subject to antidiscrimination regulation price personalization remains an area of increasing scrutiny and caution as well as tentative optimism due to competitive considerations The potential of expanded reliance on predictive models in domains affecting individuals is cause for concern After all the extensive study of fairness considerations in predictive models highlights how the joint structure of protected attributes and other information can lead algorithmic decisions even based only on non-attribute information to nonetheless lead to disparate impacts on individuals The setting of personalized pricing is particularly interesting because it fundamentally involves considerations of both resource allocation in response to price as well as predictive models for such a price response Auditing challenges arise precisely because valuations are in general not known or observed rather only binary-feedback demand response is observed Studying the case of personalized pricing is conceptually challenging because prices are a shared tool in drastically different domains we consider lending/insurance consumer goods and public provision A crucial distinction is between value-based pricing that offers different prices to customers based on their estimated willingness to pay and risk-based pricing which offers different prices to customers based on their estimated costs as in lending and insurance While discrimination law is strongest in insurance and lending in lending discrimination concerns often arise from individual agents providing offers from an actuarially-fair securitized rate sheet In particular distributional concerns regarding price optimization reflect overall concern for differentially adept/prepared/educated negotiating customers in insurance and lending but slight optimism in value-based pricing since low-income individuals may be more price-sensitive Hence the majority of our analysis will focus on value-based pricing which lends itself more readily to price optimization In the case of value-based pricing incidents where price targeting leads to disparities are often subject to media coverage and public outcry We recollect just a few of these incidents Staples changed prices based on available brick-and-mortar locations of competitors leading to higher prices for rural areas and Asians faced higher prices as a result of the Princeton Reviews zip-code based price targeting While these covariate-based pricing schemes were based on non-group contextual information nonetheless they induced disparities in prices along group lines Although there are not clear anti-discrimination principles that govern the setting of value-based pricing understanding the tradeoffs introduced by considering constraints or fairness penalties on a myopic price optimization problem can shed light on tradeoffs between various intuitive notions to inform algorithm design In this paper we study the interplay of fairness and welfare considerations as they arise in the setting of personalized pricing Our first task is conceptual we square these real-world problem settings alongside previously expressed concerns regarding price optimization For example acknowledging the empirical reality of economic inequality informs the expected distributional impacts of covariate-conditional pricing schemes along racial and economic segments We then turn to analytical modeling to identify the multiple objectives which pricing decisions affect with fairness and/or welfare implications Prices impose a burden on customers perhaps only on those who purchase result in allocations of the good itself may be optimized based on noisy predictors and the good itself may have downstream impacts of interest In Section we taxonomize these considerations into price parity marginal and conditional model error fairness preferences for access allocative efficiency and actuarial fairness we offer these operationalizations all of which may in themselves not be novel alongside contextual discussion We propose operationalizations of these normative considerations which avoid classical assumptions of known valuations focusing on identifiability based on available information In Section we provide further characterization of implications for fairness and welfare considerations for considering modifications to price optimization in order to improve on some of these notions in particular price parity and market share Where possible we provide analytical insights on tradeoffs In Section we build empirical case studies on datasets related to the public-interest goods setting based on a study of willingness-to-pay for an elective vaccine and interest rates for microcredit loans RELATEDWORK The study of algorithmic pricing and revenue management is very extensive and spans economics operations research and computer science Price discrimination has also been studied for ethical and normative considerations especially in relation to privacy We now highlight methodological and empirical work of particular relevance to algorithmic considerations In Appendix A we discuss domain-level considerations and more broad related work in greater detail We first briefly overview the classical economic taxonomy of price discrimination First-degree price discrimination offers individual prices to customers exactly at their willingness to pay which is assumed to be known Second-degree price discrimination depends on the quantity purchased but does not differ across consumers such as bulk discounts Third-degree price discrimination charges different prices to different groups of consumers such as offering senior or student discounts We focus on analyzing covariate-conditional prices which are a form of third-degree pricing but draw nearer to first-degree pricing up to the noise of random valuations The economic literature studies welfare consumer and producer surpluses implications of idealized first-degree personalized pricing assuming valuation distributions are known This classical notion of welfare is hence pegged to the valuation distribution eg consumer welfare is valuation minus price studies third-degree price discrimination using first-order conditions of valuation distributions they show that consumer welfare increases with additional price discrimination as long as total output increases provide analogous conditions for similar analysis shows that a seller can choose various segmentations that can achieve any combination of increase/decrease in consumer surplus study the theoretical computational efficiency of finding such segmentations This classical theory suggests that ideal personalized pricing may improve welfare relative to uniform monopoly pricing but that different segmentations lead to possibly indeterminate outcomes for consumer welfare The empirical literature indicates this indeterminacy in important settings empirically study implications of machine learning predictors of default probability on disparities not only for predictive performance but on using these predictions to set interest rates for loans via risk-based pricing While richer machine learning predictors expand access to credit they also result in greater price dispersion for the minority borrower on the margin Hence greater access comes at the cost of a greater price burden study personalized pricing in a Bayesian setting with posterior uncertainty quantification in a business-to-business marketing setting they find that finer-grained personalized pricing overall increases consumer welfare though this is not monotonic in segmentation granularity Pricing in the context of mechanism design follows another approach and assumes elicitation of ontologically valid valuations from strategic participants due to narrowly bracketed contexts such as auctions kidney exchanges and matching markets show that for a two-sided market market-clearing competitive equilibrium pricing is not necessarily optimal if a market designer has distributional preferences Noting that classical theory on quasilinear utility implicitly embeds the assumption that each agent values money equally they study implications of dispersion in marginal values for money of market participants for optimal market mechanisms study fairness considerations when each protected group is assigned one price and the valuation distribution is known In contrast we focus on the prediction setting with rich covariates and propose metrics that are completely independent of the valuation distribution Our analytical insights focus on covariate-personalized prices and implications of joint structure of covariate distributions and group variability on fairness considerations Finally we mention work that studies tensions in fair machine learning specifically the role of algorithms in allocating decisions or conferring utility to highlight questions of interest that have analogies in the pricing setting broadly study tensions between fairness and welfare when machine learning enacts allocations eg via classification An interest of this work is to study analogous considerations for price optimization under corresponding notions of fairness and welfare Longer-term considerations of fairness constraints have also been studied typically with the formalism of dynamical systems In machine learning regulatory considerations barring disparate treatment eg using the protected attribute information in the predictor or in algorithmic interventions may be in fundamental tension with achieving proposed fairness notions studies tensions that arise from interventions that do not use attribute information Again these broad concerns may additionally be of interest in the setting of price optimization PROBLEM SETUP We let denote customer covariates features and the protected attribute To simplify discussion we focus on binary comparisons between two protected groups and A personalized pricing policy is a function mapping covariates and possibly protected attribute information to a real-valued price R or for attribute-blind pricing rules Each sale instance is associated with a hypothetical and unknown demand curve representing the demand for each possible price R Often when each sale instance is with an individual customer is binary where denotes the individual would purchase or take-up at price In section we further restrict I to be given by a customer valuation Otherwise we do not make this restriction allowing arbitrary possibly non-rational behavior We are primarily interested in studying the question of covariate-based pricing One approach is to estimate personalized demand at a price given covariates via a parametric or semi/non-parametric model which we will denote as A personalized pricing function satisfies argmax Often policy or domain-level restrictions may prohibit prices that directly use the attribute argmax We define as the per-individual personalized price it may sometimes also refer to We additionally introduce notation for the revenue and its covariate-conditional counterpart We will also consider cases where the good has an effect on some outcome in itself such as repeat purchasing behavior health benefits downstream welfare so that is also itself a treatment We denote the corresponding potential outcomes as These represent the causal outcomes of take-up/non-take-up eg the effect on contracting malaria of purchasing/not purchasing a bed net DEFINITIONS AND METRICS We now introduce definitions of different aspects of fairness or welfare in personalized pricing addressing normative considerations motivated by different contexts and offer formalisms and operationalizations of these We consider a generic personalized price function which may reflect either first or third degree price discrimination In Section we discuss these operationalizations in more depth and analyze potential trade-offs Observational metrics We introduce the following notions of allocative fairness based on what we may observe prices demand outcome eg purchase/no purchase and potential downstream outcomes due to the good In Appendix A we provide further discussion on why if we are concerned about fairness in the first place we might be skeptical about defining fairness relative to valuations or other unrevealed latent preferences/valuations Price parity Context A customer always benefits from a lower price The difference between distributions of prices faced by different groups measures potential unfairness in price burdens An extreme example is the so-called pink tax commissioned by the Mayors office in New York City studies gender-based pricing differentials and finds an average of higher prices paid by women for example womens pink razors are more expensive for the exact same product This highlights the capacity of price optimization to extract consumer value from behavioral failures of economic regarding valuations In particular using pinkness to segment products corresponds to extracting valuation from social constructions of gender all other functionality being the same for a product with no signaling value While the pink razor is an extreme example considerations regarding price parity are a common intuitive objection to personalized pricing Operationalization We introduce a definition based on distributional equivalence of prices for each group Definition Price parity We may also consider parity in moments of the price distribution which also enables a simple way to give a scalar metric to disparity Definition Marginal price parity Correspondingly the marginal price disparity is The notion of disparate treatment in fair machine learning suggests that the following notion of covariate-conditional price parity is intuitively appealing Definition 𝑥-conditional price parity Notice however that satisfying definition generally does not ensure satisfying definitions and due to differing distributions of covariates between groups Indeed in general contexts it is well-understood that equal treatment need not lead to equal impact this remains true in personalized pricing Finally it is often helpful to consider price parity conditional on take-up or more generally on demand Conditioning on take-up reflects that price only affects consumer utility if the customer purchases Definition Take-up-conditional parity More generally we may wish to condition on the effect of pricing Consider the case where there is a nominal price and represents a personalized potential discount The event is the event that demand increases as an effect of the discount In the binary demand case that an individual purchases if and only if given the discount rather than purchasing irrespective of discount or not purchasing irrespective which we term a responder to the discount Conditioning on responsiveness accounts for the possibility that different groups have different valuations or willingness to Notably while legislation has been proposed to try to address the pink tax this has not been established as gender-based discrimination See for more discussion pay and to the extent that one deems it acceptable to personalize to leverage such differences and often it is not parity conditional on response requires we do not price-discriminate more than is justified by response to discount Model error fairness Context Given that fairness in machine learning studies how predictive models may exhibit differential model performance predictive accuracy error distributions by group a natural question is how such disparities in predictive model performance might affect the suboptimality of different prices and whether different groups might experience different price suboptimality burdens due to error patterns of the predictive model Operationalization The rest of this paper studies pricing based on a true conditional demand model In practice however only an estimate is available from observed data For example for the pricing problem argmin Price suboptimality fairness is concerned with the decision suboptimality of a price based on a risk model vs the price derived from the actuarially fair true risk For example may differ from when we learn the prediction from finite samples and differential accuracy thereof could lead to fairness concerns In Section we will focus on the revenue objective Access and equal access Context We are often concerned about access to the good being sold especially when the good has benefits that are deemed crucial such as vaccines see also our empirical study in section loans or broadband internet In terms of welfare it is important to consider the total access that personalized schemes lead to namely the total demand In terms of fairness we may be concerned with allocative parity in the form of parity in market shares or take-up probabilities by group Personalized pricing schemes may in fact enhance both of these measures by allowing revenue extraction from high-valuation groups to enable offering lower price offers to low-valuation individuals hence pricing people into the market High-valuation groups are usually those with financial means that allows them to have a higher willingness to pay and low-valuation groups are usually those with less financial means Operationalization Total access is simply the marginal demand When demand is binary this is the fraction of individuals who take-up the good Definition Total access The idea of access parity suggests requiring equal allocation of access market share take-up Definition Access parity Correspondingly access disparity is Allocative efficiency and fairness Context In settings where interpreting revealed preferences as rational choices due to latent valuations efficiency considerations are concerned with how prices sort individuals by their valuations and ensure that a good may be targeted towards those who value it the most For example the literature on pricing health interventions in development is particularly interested in the difference between free and low-price provisions based on whether prices better target households who are more likely to use a product An important further concern is whether errors in sorting individuals disproportionately affect one group more than another so that on average certain groups are more often incorrectly given priority over others Operationalization We focus on providing observational metrics which assess sorting/targeting without assuming access to the full valuation distribution For this section we focus on the binary feedback setting where Assumption Monotonicity For any Assuming monotonicity of binary demand with respect to price as in is equivalent to assuming a random latent threshold model ie This perspective recognizes that observations of the binary event under are censored observations of the underlying valuation The question is whether a given pricing scheme for which we have observed the binary outcomes appropriately ranks valuations of individuals A marginal measure of such efficiency may be concordance Definition Concordance Given two individuals drawn independently at random concordance is While concordance captures how efficiently prices sort individuals by valuation such efficiency may have disparate effects To capture this disparity we propose the class-crossed concordance disparity metric Definition Class-crossed concordance disparity Given two individuals drawn independently at random from groups and respectively class-crossed concordance disparity is Class-crossed concordance has the following probabilistic interpretation The term can be interpreted as of those whose valuations can be ordered under what is the probability that valuations drawn from one group are stochastically greater than valuations from another group Class-crossed concordance measures a groupwise disparity in the difference in these probabilities Targeting long-run dynamics Context A key domain-level consideration that justifies preferring take-up is that take-up of the good is itself a treatment with a downstream outcome such as future purchases/customer loyalty in e-commerce net present value of continued borrowing Insurance Lending Consumer goods Public-interest goods Moral hazard/Adverse selection Revenue-driven price optimization Risk-driven price optimization Prefer marginal price parity Prefer conditional price parity Prefer access Actuarial fairness Allocative efficiency/sorting Targeting long-run dynamics Table Different problem settings and what fairness/welfare notions are relevant when or usage and downstream health outcomes of a preventive health intervention in development economics Therefore price impacts an allocation which itself may have heterogeneous effects on longer-term outcomes for the customer and/or decision-maker we identify this as targeting long-run dynamics This for example justifies an overall preference for expanding market shares The possibility of a triple bottom line Price personalization may be beneficial due to its increasing take-up of a good which is beneficial for individuals and the decision-maker targeted price subsidies enable budget-balanced public provision in contrast to a complete subsidy and the access expansion might particularly those who would benefit the most Of course whether these benefits compound or whether certain contributors are irrelevant need to be assessed in the data of any particular setting as in Operationalization We recognize the firms objective function as population welfare downstream of a price allocation Summary of problem settings and relevant notions Abstractly we might summarize some of the above considerations by considering a scalarized multi-objective optimization problem which represents the expansion of considerations beyond myopic revenue maximization max st Sections and and price parity access long-run welfare might conceivably be included in a conceptual multi-objective version of the firms problem while Sections and price suboptimality class-crossed concordance are idealized measures In table we apply our conceptual taxonomy of problem domains to these different fairness/welfare notions in pricing The first category of criteria summarizes how different problem settings differ in the presence of moral hazard/adverse selection that justifies risk-based pricing and the capacity for price optimization The second category identifies which notions of fairness or equity are more or less relevant in different settings We caution that the above optimization problem is a conceptual device to illustrate how these notions might justify revenue sub-optimal allocations Table suggests that in any particular application setting these notions may not be simultaneously relevant ANALYSIS OF DEFINITIONS AND METRICS In this section we expand further on each definition Where possible eg by making additional assumptions we provide analytical insight on implications of these fairness notions for price optimization or corresponding specializations of Price-parity We study the price optimization problem with additional price parity constraints focusing on highlighting tradeoffs with implications for algorithm design To simplify the analysis we make the following assumptions We assume a partially linear demand model with a link function of the non-price covariate-driven demand and a linear component for price elasticity Assumption Partially linear demand model Assumption Downward sloping linear demand with respect to price A For example the linear model corresponds to Linear demand is a common assumption for contextual pricing We also assume that price elasticities are negative Without loss of generality assume group has higher average price at the unconstrained solution The marginal parity constrained revenue maximization problem is a specialization of Let denote the corresponding parametrized solution argmax st The attribute-blind personalized price is which restricts the above optimization to prices which only personalize on We derive the parity-constrained optimal price We discuss constraining first moments of the price distributions marginal parity to provide analytical insights Constraining higher order moments via eg a set constrained by Kolmogorov-Smirnov statistic or a moment-based hierarchy as in is computationally possible Theorem Let b The optimal attribute-based personalized price under marginal parity solving is b where Eb The optimal attribute-blind personalized price is where b The proof is included in Appendix B the key idea is to study the Lagrangian dual of the knapsack-constrained quadratic program and solve by swapping the order of minimum and maximum In the following analysis we focus on an equality constraint in Interpreting the solution differs from the unconstrained personalized price by a penalty whose size depends on the discrepancy of the price-independent covariate-based demand within groups We highlight some tradeoffs induced by marginal price parity against other fairness considerations We first consider a very special setting where the demand function is invariant across groups it is only the group-conditional covariate distribution which induces price disparity Proposition Attribute-based vs attribute-blind pricing under marginal parity Suppose and further that is linear in and Then we have and In this very special case we find that group would uniformly prefer attribute-based marginal parity pricing The relationship is not necessarily uniform for group A sufficient condition for example is if for some and then Hence for outliers within group satisfying this condition attribute-based pricing is Pareto optimal relative to attribute-blind pricing for both groups Since however price disparity in this special case is exactly driven by variability in we might also expect that for some other Building on the results of Theorem and Proposition we also provide bounds on the revenue loss due to attribute-blind pricing now in the setting where the non-price-based demand may differ across groups Corollary Revenue loss of Suppose and Then We now use these characterizations from Theorem Proposition and Corollary to study tradeoffs between price parity and other desiderata in particular x-conditional parity and summarize some implications for algorithm design A firm may generically prefer attribute-blind pricing to attribute-based pricing schemes due to regulatory considerations or x-conditional price parity definition If achieving marginal parity is of interest in view of price disparities attribute-blind marginal parity achieves lower firm revenue than attribute-based marginal parity We provide a quantitative bound on the gap in a simple case in Corollary Under the special case of Proposition for some attribute-based marginal parity is strictly preferable to attribute-blind marginal parity for both groups These considerations might outweigh an intuitive preference for attribute-blind pricing in the case of marginal parity Price suboptimality fairness We provide a decomposition that gives structural conditions on when the sign of the prediction error is informative of the sign of the mispricing or decision error In particular this highlights a distinction between analyzing fairness in data-driven optimal prices vs fair prediction in machine learning Proposition Price suboptimality error decomposition Assume that Up to first order terms The decomposition is not computable from observed data since some quantities depend on the unknown One implication is that the sign of ultimately depends on the sign of a few quantities estimation error gradient est error price There are some cases where we may be able to conclude the sign of decision error we can conclude if are all positive However in general the main implication of the above proposition is that the direction of decision disparity is not immediate from prediction error of alone it also depends on estimation error of the gradient and the difference in gradients due to suboptimality It is more difficult to conclude implications of pricing decisions and more broadly optimization decisions based on uncertain nuisance predictions Applying the above result to allows us to make a similar conclusion for the discrepancy of pricing with respect to attribute-based vs the attribute-blind setting Market share We study a multi-objective version of with additional weights on group-conditional market share objectives We consider demand that arises from an underlying valuation distribution This is true without loss of generality under of monotonicity The most general assumption that admits a concave price optimization program is log-concavity of valuation distributions Assumption Log-concave valuation distribution Suppose that where has a log-concave probability density function We assume log-concavity so that the cdf and cumulative cdf of effectively are also log-concave Log-concavity is quite general log-concave pdfs include the normal exponential logistic extreme value Laplace gamma Weibull etc Then the population-level market share personalized-price specialization of is a concave program under since maximization is equivalent under the monotonic increasing log transformation argmax We may consider the attribute-blind restriction of the above argmax The above problems consider a population-level market share penalty we also consider group-conditional market share penalties These may arise from the penalty formulation of the market-share constrained problem where some is the optimal dual Lagrange multiplier for the constraints max Correspondingly the attribute-based group-conditional market share price solves pointwise over argmax We study the sensitivity of the unconstrained-optimal attribute-blind and attribute-based personalized price to local increases in the penalty parameter relative from the unconstrained optimal price ie This describes how much the price changes in response to implementing distributional preferences for market share Quantifying these sensitivities sheds light on the dependence on the second derivative of the conditional revenue function Lemma Optimality conditions for different penalties Suppose Population-level market share attribute-based sensitivity is Population-level market share attribute-blind sensitivity is Group-level market share attribute-based sensitivity is Observe that these sensitivities are negative under The proof included in the appendix identifies the pointwise optimality conditions of the constrained optimizations and applies the implicit function theorem We highlight some implications of Lemma for algorithm design For larger greater curvature the less price decrease is required to increase market share and conversely for smaller the larger price decrease is required Quantifying these sensitivities in terms of highlights the revenue implications of these price fairness changes Considering a second-order expansion of the revenue smaller suggests that the larger price decrease may not have extreme revenue decrease Curvature also quantifies the rate of convergence of the optimal price eg if optimizing over a parametrized pricing policy via M-estimation Hence finite-sample variability of the optimal price which may be assessed empirically by bootstrapping may suggest low curvature This suggests a robust approach which ensures out-of-sample market share may incur small revenue tradeoff in the low-curvature regime Allocative efficiency concordance Assumption of almost sure monotonicity suggests that the combination of continuous treatment and binary outcome can be viewed as a censored observation of the valuation Again we do not assume access to the underlying realizations of valuation distribution but study what may be concluded about valuations given that we only observe the censored realizations I Consider ranking the prices and valuations of two generic price-valuation-demand triples The only joint outcome of demands and prices that admits concluding an ordering on the underlying valuations is that Using this observation which is highly dependent on almost sure monotonicity we can identify a lower bound on concordance from observational data Theorem Assume and Note that is related to the concordance index of sensitivity analysis in particular the perspective studied by who suggest a ranking-based approach to survival analysis In survival analysis right-censoring occurs when there is a finite horizon end to data collection for the survival time of patients so that the observed survival times are the minimum of the censoring time and the actual survival time The concordance score is a generalization of Wilcoxon-Mann-Whitney statistics and the AUC that applies to continuous output variables and accounts for censoring of the data It is the fraction of all pairs of subjects whose predicted survival times are correctly ordered among all subjects that can be ordered observe that two subjects survival times can be ordered not only if both of them are uncensored but also if the uncensored time of one is smaller than the censored time of another Relative to the concordance index of right-censored survival analysis the setting of allocative efficiency is more difficult we are required to further restrict attention to pairs and we can at best order Targeting for long-run dynamics optimal encouragement designs An important justification for cross-subsidy preferring take-up is in recognizing that take-up of the good may itself be a treatment for downstream outcomes Such outcomes of interest might include long-term customer value social learning repeated purchase behavior compliance attrition etc We highlight that one might view as either a continuous treatment or instrument For example this is a major focus of which considers the amortized net present value of customers over a long time-horizon after they take-up a microcredit loan Their analysis suggests that while price discrimination to expand take-up may result in losses in short-term profits this can be outweighed by clients aging into a loan portfolio and becoming more profitable This is also of concern for health interventions in development take-up of the good is not the final outcome of interest but rather health outcomes are In particular the possibility of such a triple bottom line highlights a situation where non-ideal theory that propagates the effects of known inequality to the expected failures of classical economic theory may highlights possible opportunities for personalized pricing to achieve practical benefit For example a plausible narrative recognizes that poorer households undervalue preventive healthcare not because of some fundamental underlying preference for poor health but due to behavioral considerations and cognitive burdens which prevent endogenizing the full health benefits of a product or for far more practical reasons since they may simply have lower incomes As a result they may be more price sensitive And they may receive outsized additional health benefits from using the preventive health intervention if they are indeed liquidity constrained due to lack of other ancillary health interventions Personalized price offers allow making lower price offers increasing take-up and if indeed these households priced in on the margin receive greater heterogeneous benefits larger welfare improvements There are two perspectives In Figure b price is a continuous instrument for treatment and hence outcome That is recognizing that one cannot directly assign the actual treatment of interest one can neither force loans upon individuals nor ethically randomly reject individuals who apply for loans exogenous price variation may be the only tool from observational data for assessing the Estimating a covariate-conditional local instrumental variable curve or optimal policy when the price instrument is the control variable remains an open problem See for doubly robust estimation of the continuous instrument or for policy optimization with heterogeneous effects and discrete instruments a Price as treatment b Price as instrument causal impacts of loans on welfare Crucially price satisfies the main assumptions for instrumental variables relevance that it predicts treatment loan take-up and more importantly the exclusion restriction that the only effect of the price on outcome is via its impact on treatment This may be plausible when the outcome of interest is a quantity such as health impacts of a bednet on malaria incidence impacts of sanitation on health outcomes or social learning for sustained use of the intervention via subsidized first use In the lending setting this may be plausible if it is believed interest rates do not affect default event or the amount borrowed Another perspective views price as continuous treatment eg Figure a There are some posited behavioral economics effects which may lead to a failure of the exclusion restriction such that price affects outcome such as anchoring to reference prices which attenuates future take-up or sunk-cost fallacies when high prices encourage usage/non-wastage this is explored in Alternatively interest rates might affect default probability if individuals are liquidity-constrained Evidence is mixed in lending assumes this finds no effect and finds some effect of rates on default Alternatively interest rates might have an effect on the extensive demand margin amount borrowed In this setting we might instead consider price as a continuous treatment with a composite outcome of take-up and observed outcome conditional on take-up such as amount borrowed or default outcome From the perspective of optimization we generally view price as a treatment and optimize for corresponding downstream outcomes eg conduct an intention to treat analysis CASE STUDIES Willingness to pay for elective vaccine We build a case study from a willingness-to-pay study for vaccination against tick-borne encephalitis in Sweden The vaccine for tick-borne encephalitis TBE is elective and the study is interested in assessing determinants of willingness to pay to inform health policy Demand is associated with price and income as well as individual contextual factors such as age geographic risk factors trust perceptions and knowledge about tick-borne disease The health policy recommendation uses the learned demand model to estimate the vaccination rate under a free completely subsidized vaccine This setting corresponds to the setting of public provision where a decision-maker has a preference for higher take-up due to dynamic externalities of vaccines which are nonetheless difficult to precisely estimate or target The study was a contingent valuation study which asked individuals about take-up at a random price of or SEK The study finds that The current market price of the TBE vaccine deters a substantial share of at-risk people with low incomes from getting vaccinated In Figures a and b we compare distributional considerations of segmented vs personalized pricing Let indicate low-income We follow and learn a logistic regression model of binary demand by simply appending the price covariate with the other covariates so that A natural approach in the setting where a free subsidy is not feasible due to budget constraints is third-degree price discrimination segment based on income and offer a price to low-income and high-income groups separately We consider such a group-segmented approach in Figure a The blue curve represents the revenue curve for a uniform price The red maj and green min curves are revenue curves from the majority high-income and minority low-income groups respectively We indicate the resulting optimal prices for each of these curves with vertical dashed lines Notably the revenue curve has greater second-degree curvature than the revenue curve Because of the flat revenue curve the market share of the minority group can be substantially increased without much extra cost We next consider a covariate-driven personalization approach In Figure b we plot histograms of the group-conditional distributions of these optimal prices and The optimal group-based prices are indicated by the vertical lines for reference We solve argmax Notably the optimal prices for the low-income group are overall lower than those for the high-income group Expected take-up in this segment increases to from under the uniform monopoly price or under the optimal group-based price of Figure a Compared to the uniform monopoly price which obtains expected optimal revenue of the group-based segment scheme obtains expected revenue of and the personalized pricing scheme obtains expected revenue of In this setting covariate-based personalized pricing is strictly beneficial in terms of mild revenue benefits that are also able to achieve greater market share for the minority group While the group-based segmentation results in a lower price for the minority group it is overall not incentive-compatible for a decisionmaker to use this segmentation because it attains less revenue than even uniform monopoly pricing Credit Elasticities randomize prices for a microfinance lender for repeat borrowers An extensive literature on microfinance sought to assess whether microcredit was able to provide longer term benefits in improving outcomes for household The rise of the sector led to partially subsidized lenders as well as interest from the private sector The question of the study was to leverage price randomization in the microcredit setting and assess the effects of lower or higher interest rates on revenue for the lender Overalal the findings suggest lower rates could decrease profits by a small amount But the paper considers that at the domain level since microfinance initiatives may have targeting preferences eg for financial inclusion for women or lower-income individuals such potential mild profit losses could be offset by expanded inclusion of these target groups due to heterogeneity in take-up This setting could present an opportunity for personalized pricing to differentially lower interest rates and expand revenue to targeted groups Adopting an intention to treat analysis we use the method of to consider off-policy evaluation and optimization of a continuous linear personalized pricing policy from the randomized controlled trial data The policy parametrization is linear in the covariates which include income demographics location and loan history information The method of considers a kernel-based estimator of the counterfactual value of a pricing policy We use the Epanechnikov kernel and a bandwidth of the optimization is non-convex Because of the fundamental problem of causal inference we lack the ability to directly assess outcomes Nonetheless we provide some comparison of the estimated revenue and market shares under the personalized policy We consider a training/nuisance estimation/validation split training a random forest on the nuisance estimation split and learning an optimal policy on the training data with a doubly robust estimator We use the random forest to estimate the revenue of the personalized policy in comparison to constant interest rates on the validation set Finally to indicate the sampling variation in our comparison induced by training the benchmark model we repeat draws of the nuisance/validation sets and report the sampling variation in revenue estimates via confidence bands of one standard error We include the results in Figure c and Figure d Figure c plots the random-forest imputed revenue of the personalized allocation indicated in black dashed plotting one standard error comparing against the imputed revenue via the random forest model of constant interest rates on the x-axis in blue The personalized allocation rule increases estimated revenue as expected We assess some of the distributional characteristics of the resulting allocation In Figure d we compare the access properties of the personalized decision rules for subgroups of interest namely female and non-female borrowers and low-income and non-low-income borrowers The estimates of access in Figure d are based on a logistic regression of demand learned on the nuisance estimation dataset In horizontal dashed lines we plot the access estimates for these subgroups under the personalized allocation rule Note the achievable subgroup access levels correspond to intersections of vertical lines with the demand curves In comparison the personalized pricing allocation rule is able to increase access for female and low-income borrowers relative to the optimal constant interest rate around The unconstrained optimal personalized price however achieves lower takeup for non-low income borrowers ie it increased interest rates for them Stronger distributional guarantees may be possible by further constraining the price optimization problem Overall the goal is to highlight that personalized pricing can improve firm revenue as well as increase access and improving targeting abilities This is in general a biased direct method and we take care to avoid extrapolation from interest rates However for the sake of comparing against constant treatment assignment using the direct method reduces variance price ex pe ed se en t r en e maj min a Revenue curves for segments price no term al d en Ab Aa b Distribution of constant interest rate Es tim at ed re ve nu e E Y p personalized price c Estimated revenue comparison interest rate E D p A Low I non-Low I d Comparing take-up Figure Willingness to pay for elective vaccine Figures a and b and Microcredit Figures c and d